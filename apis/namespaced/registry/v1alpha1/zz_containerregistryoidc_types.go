/*
Copyright 2022 Upbound Inc.
*/

// Code generated by upjet. DO NOT EDIT.

package v1alpha1

import (
	metav1 "k8s.io/apimachinery/pkg/apis/meta/v1"
	"k8s.io/apimachinery/pkg/runtime/schema"

	v1 "github.com/crossplane/crossplane-runtime/v2/apis/common/v1"
	v2 "github.com/crossplane/crossplane-runtime/v2/apis/common/v2"
)

type ContainerRegistryOIDCInitParameters struct {

	// Delete existing users from Harbor. OIDC can't be enabled if there is at least one user already created. This parameter is only used at OIDC configuration creation. Changing this value recreates the resource.
	DeleteUsers *bool `json:"deleteUsers,omitempty" tf:"delete_users,omitempty"`

	// Specify an OIDC admin group name. All OIDC users in this group will have harbor admin privilege. Keep it blank if you do not want to.
	OidcAdminGroup *string `json:"oidcAdminGroup,omitempty" tf:"oidc_admin_group,omitempty"`

	// Skip the onboarding screen, so user cannot change its username. Username is provided from ID Token.
	OidcAutoOnboard *bool `json:"oidcAutoOnboard,omitempty" tf:"oidc_auto_onboard,omitempty"`

	// The client ID with which Harbor is registered as client application with the OIDC provider.
	OidcClientID *string `json:"oidcClientId,omitempty" tf:"oidc_client_id,omitempty"`

	// The secret for the Harbor client application.
	OidcClientSecretSecretRef v1.LocalSecretKeySelector `json:"oidcClientSecretSecretRef" tf:"-"`

	// The URL of an OIDC-compliant server.
	OidcEndpoint *string `json:"oidcEndpoint,omitempty" tf:"oidc_endpoint,omitempty"`

	// The name of Claim in the ID token whose value is the list of group names.
	OidcGroupsClaim *string `json:"oidcGroupsClaim,omitempty" tf:"oidc_groups_claim,omitempty"`

	// The name of the OIDC provider.
	OidcName *string `json:"oidcName,omitempty" tf:"oidc_name,omitempty"`

	// The scope sent to OIDC server during authentication. It's a comma-separated string that must contain 'openid' and usually also contains 'profile' and 'email'. To obtain refresh tokens it should also contain 'offline_access'.
	OidcScope *string `json:"oidcScope,omitempty" tf:"oidc_scope,omitempty"`

	// The name of the claim in the ID Token where the username is retrieved from. If not specified, it will default to 'name' (only useful when automatic Onboarding is enabled).
	OidcUserClaim *string `json:"oidcUserClaim,omitempty" tf:"oidc_user_claim,omitempty"`

	// Set it to false if your OIDC server is hosted via self-signed certificate.
	OidcVerifyCert *bool `json:"oidcVerifyCert,omitempty" tf:"oidc_verify_cert,omitempty"`

	// The ID of the Managed Private Registry. Changing this value recreates the resource.
	// +crossplane:generate:reference:type=github.com/edixos/provider-ovh/apis/namespaced/registry/v1alpha1.ContainerRegistry
	RegistryID *string `json:"registryId,omitempty" tf:"registry_id,omitempty"`

	// Reference to a ContainerRegistry in registry to populate registryId.
	// +kubebuilder:validation:Optional
	RegistryIDRef *v1.NamespacedReference `json:"registryIdRef,omitempty" tf:"-"`

	// Selector for a ContainerRegistry in registry to populate registryId.
	// +kubebuilder:validation:Optional
	RegistryIDSelector *v1.NamespacedSelector `json:"registryIdSelector,omitempty" tf:"-"`

	// The ID of the public cloud project. If omitted, the OVH_CLOUD_PROJECT_SERVICE environment variable is used. Changing this value recreates the resource.
	ServiceName *string `json:"serviceName,omitempty" tf:"service_name,omitempty"`
}

type ContainerRegistryOIDCObservation struct {

	// Delete existing users from Harbor. OIDC can't be enabled if there is at least one user already created. This parameter is only used at OIDC configuration creation. Changing this value recreates the resource.
	DeleteUsers *bool `json:"deleteUsers,omitempty" tf:"delete_users,omitempty"`

	ID *string `json:"id,omitempty" tf:"id,omitempty"`

	// Specify an OIDC admin group name. All OIDC users in this group will have harbor admin privilege. Keep it blank if you do not want to.
	OidcAdminGroup *string `json:"oidcAdminGroup,omitempty" tf:"oidc_admin_group,omitempty"`

	// Skip the onboarding screen, so user cannot change its username. Username is provided from ID Token.
	OidcAutoOnboard *bool `json:"oidcAutoOnboard,omitempty" tf:"oidc_auto_onboard,omitempty"`

	// The client ID with which Harbor is registered as client application with the OIDC provider.
	OidcClientID *string `json:"oidcClientId,omitempty" tf:"oidc_client_id,omitempty"`

	// The URL of an OIDC-compliant server.
	OidcEndpoint *string `json:"oidcEndpoint,omitempty" tf:"oidc_endpoint,omitempty"`

	// The name of Claim in the ID token whose value is the list of group names.
	OidcGroupsClaim *string `json:"oidcGroupsClaim,omitempty" tf:"oidc_groups_claim,omitempty"`

	// The name of the OIDC provider.
	OidcName *string `json:"oidcName,omitempty" tf:"oidc_name,omitempty"`

	// The scope sent to OIDC server during authentication. It's a comma-separated string that must contain 'openid' and usually also contains 'profile' and 'email'. To obtain refresh tokens it should also contain 'offline_access'.
	OidcScope *string `json:"oidcScope,omitempty" tf:"oidc_scope,omitempty"`

	// The name of the claim in the ID Token where the username is retrieved from. If not specified, it will default to 'name' (only useful when automatic Onboarding is enabled).
	OidcUserClaim *string `json:"oidcUserClaim,omitempty" tf:"oidc_user_claim,omitempty"`

	// Set it to false if your OIDC server is hosted via self-signed certificate.
	OidcVerifyCert *bool `json:"oidcVerifyCert,omitempty" tf:"oidc_verify_cert,omitempty"`

	// The ID of the Managed Private Registry. Changing this value recreates the resource.
	RegistryID *string `json:"registryId,omitempty" tf:"registry_id,omitempty"`

	// The ID of the public cloud project. If omitted, the OVH_CLOUD_PROJECT_SERVICE environment variable is used. Changing this value recreates the resource.
	ServiceName *string `json:"serviceName,omitempty" tf:"service_name,omitempty"`
}

type ContainerRegistryOIDCParameters struct {

	// Delete existing users from Harbor. OIDC can't be enabled if there is at least one user already created. This parameter is only used at OIDC configuration creation. Changing this value recreates the resource.
	// +kubebuilder:validation:Optional
	DeleteUsers *bool `json:"deleteUsers,omitempty" tf:"delete_users,omitempty"`

	// Specify an OIDC admin group name. All OIDC users in this group will have harbor admin privilege. Keep it blank if you do not want to.
	// +kubebuilder:validation:Optional
	OidcAdminGroup *string `json:"oidcAdminGroup,omitempty" tf:"oidc_admin_group,omitempty"`

	// Skip the onboarding screen, so user cannot change its username. Username is provided from ID Token.
	// +kubebuilder:validation:Optional
	OidcAutoOnboard *bool `json:"oidcAutoOnboard,omitempty" tf:"oidc_auto_onboard,omitempty"`

	// The client ID with which Harbor is registered as client application with the OIDC provider.
	// +kubebuilder:validation:Optional
	OidcClientID *string `json:"oidcClientId,omitempty" tf:"oidc_client_id,omitempty"`

	// The secret for the Harbor client application.
	// +kubebuilder:validation:Optional
	OidcClientSecretSecretRef v1.LocalSecretKeySelector `json:"oidcClientSecretSecretRef" tf:"-"`

	// The URL of an OIDC-compliant server.
	// +kubebuilder:validation:Optional
	OidcEndpoint *string `json:"oidcEndpoint,omitempty" tf:"oidc_endpoint,omitempty"`

	// The name of Claim in the ID token whose value is the list of group names.
	// +kubebuilder:validation:Optional
	OidcGroupsClaim *string `json:"oidcGroupsClaim,omitempty" tf:"oidc_groups_claim,omitempty"`

	// The name of the OIDC provider.
	// +kubebuilder:validation:Optional
	OidcName *string `json:"oidcName,omitempty" tf:"oidc_name,omitempty"`

	// The scope sent to OIDC server during authentication. It's a comma-separated string that must contain 'openid' and usually also contains 'profile' and 'email'. To obtain refresh tokens it should also contain 'offline_access'.
	// +kubebuilder:validation:Optional
	OidcScope *string `json:"oidcScope,omitempty" tf:"oidc_scope,omitempty"`

	// The name of the claim in the ID Token where the username is retrieved from. If not specified, it will default to 'name' (only useful when automatic Onboarding is enabled).
	// +kubebuilder:validation:Optional
	OidcUserClaim *string `json:"oidcUserClaim,omitempty" tf:"oidc_user_claim,omitempty"`

	// Set it to false if your OIDC server is hosted via self-signed certificate.
	// +kubebuilder:validation:Optional
	OidcVerifyCert *bool `json:"oidcVerifyCert,omitempty" tf:"oidc_verify_cert,omitempty"`

	// The ID of the Managed Private Registry. Changing this value recreates the resource.
	// +crossplane:generate:reference:type=github.com/edixos/provider-ovh/apis/namespaced/registry/v1alpha1.ContainerRegistry
	// +kubebuilder:validation:Optional
	RegistryID *string `json:"registryId,omitempty" tf:"registry_id,omitempty"`

	// Reference to a ContainerRegistry in registry to populate registryId.
	// +kubebuilder:validation:Optional
	RegistryIDRef *v1.NamespacedReference `json:"registryIdRef,omitempty" tf:"-"`

	// Selector for a ContainerRegistry in registry to populate registryId.
	// +kubebuilder:validation:Optional
	RegistryIDSelector *v1.NamespacedSelector `json:"registryIdSelector,omitempty" tf:"-"`

	// The ID of the public cloud project. If omitted, the OVH_CLOUD_PROJECT_SERVICE environment variable is used. Changing this value recreates the resource.
	// +kubebuilder:validation:Optional
	ServiceName *string `json:"serviceName,omitempty" tf:"service_name,omitempty"`
}

// ContainerRegistryOIDCSpec defines the desired state of ContainerRegistryOIDC
type ContainerRegistryOIDCSpec struct {
	v2.ManagedResourceSpec `json:",inline"`
	ForProvider            ContainerRegistryOIDCParameters `json:"forProvider"`
	// THIS IS A BETA FIELD. It will be honored
	// unless the Management Policies feature flag is disabled.
	// InitProvider holds the same fields as ForProvider, with the exception
	// of Identifier and other resource reference fields. The fields that are
	// in InitProvider are merged into ForProvider when the resource is created.
	// The same fields are also added to the terraform ignore_changes hook, to
	// avoid updating them after creation. This is useful for fields that are
	// required on creation, but we do not desire to update them after creation,
	// for example because of an external controller is managing them, like an
	// autoscaler.
	InitProvider ContainerRegistryOIDCInitParameters `json:"initProvider,omitempty"`
}

// ContainerRegistryOIDCStatus defines the observed state of ContainerRegistryOIDC.
type ContainerRegistryOIDCStatus struct {
	v1.ResourceStatus `json:",inline"`
	AtProvider        ContainerRegistryOIDCObservation `json:"atProvider,omitempty"`
}

// +kubebuilder:object:root=true
// +kubebuilder:subresource:status
// +kubebuilder:storageversion

// ContainerRegistryOIDC is the Schema for the ContainerRegistryOIDCs API.
// +kubebuilder:printcolumn:name="SYNCED",type="string",JSONPath=".status.conditions[?(@.type=='Synced')].status"
// +kubebuilder:printcolumn:name="READY",type="string",JSONPath=".status.conditions[?(@.type=='Ready')].status"
// +kubebuilder:printcolumn:name="EXTERNAL-NAME",type="string",JSONPath=".metadata.annotations.crossplane\\.io/external-name"
// +kubebuilder:printcolumn:name="AGE",type="date",JSONPath=".metadata.creationTimestamp"
// +kubebuilder:resource:scope=Namespaced,categories={crossplane,managed,ovh}
type ContainerRegistryOIDC struct {
	metav1.TypeMeta   `json:",inline"`
	metav1.ObjectMeta `json:"metadata,omitempty"`
	// +kubebuilder:validation:XValidation:rule="!('*' in self.managementPolicies || 'Create' in self.managementPolicies || 'Update' in self.managementPolicies) || has(self.forProvider.oidcClientId) || (has(self.initProvider) && has(self.initProvider.oidcClientId))",message="spec.forProvider.oidcClientId is a required parameter"
	// +kubebuilder:validation:XValidation:rule="!('*' in self.managementPolicies || 'Create' in self.managementPolicies || 'Update' in self.managementPolicies) || has(self.forProvider.oidcClientSecretSecretRef)",message="spec.forProvider.oidcClientSecretSecretRef is a required parameter"
	// +kubebuilder:validation:XValidation:rule="!('*' in self.managementPolicies || 'Create' in self.managementPolicies || 'Update' in self.managementPolicies) || has(self.forProvider.oidcEndpoint) || (has(self.initProvider) && has(self.initProvider.oidcEndpoint))",message="spec.forProvider.oidcEndpoint is a required parameter"
	// +kubebuilder:validation:XValidation:rule="!('*' in self.managementPolicies || 'Create' in self.managementPolicies || 'Update' in self.managementPolicies) || has(self.forProvider.oidcName) || (has(self.initProvider) && has(self.initProvider.oidcName))",message="spec.forProvider.oidcName is a required parameter"
	// +kubebuilder:validation:XValidation:rule="!('*' in self.managementPolicies || 'Create' in self.managementPolicies || 'Update' in self.managementPolicies) || has(self.forProvider.oidcScope) || (has(self.initProvider) && has(self.initProvider.oidcScope))",message="spec.forProvider.oidcScope is a required parameter"
	// +kubebuilder:validation:XValidation:rule="!('*' in self.managementPolicies || 'Create' in self.managementPolicies || 'Update' in self.managementPolicies) || has(self.forProvider.serviceName) || (has(self.initProvider) && has(self.initProvider.serviceName))",message="spec.forProvider.serviceName is a required parameter"
	Spec   ContainerRegistryOIDCSpec   `json:"spec"`
	Status ContainerRegistryOIDCStatus `json:"status,omitempty"`
}

// +kubebuilder:object:root=true

// ContainerRegistryOIDCList contains a list of ContainerRegistryOIDCs
type ContainerRegistryOIDCList struct {
	metav1.TypeMeta `json:",inline"`
	metav1.ListMeta `json:"metadata,omitempty"`
	Items           []ContainerRegistryOIDC `json:"items"`
}

// Repository type metadata.
var (
	ContainerRegistryOIDC_Kind             = "ContainerRegistryOIDC"
	ContainerRegistryOIDC_GroupKind        = schema.GroupKind{Group: CRDGroup, Kind: ContainerRegistryOIDC_Kind}.String()
	ContainerRegistryOIDC_KindAPIVersion   = ContainerRegistryOIDC_Kind + "." + CRDGroupVersion.String()
	ContainerRegistryOIDC_GroupVersionKind = CRDGroupVersion.WithKind(ContainerRegistryOIDC_Kind)
)

func init() {
	SchemeBuilder.Register(&ContainerRegistryOIDC{}, &ContainerRegistryOIDCList{})
}
